appId: host.exp.exponent
---
- launchApp:
    clearState: true
- waitForAnimationToEnd

- openLink: "exp://192.168.254.9:8081"
- waitForAnimationToEnd

# Expo Go popup (first run only)
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    point: "92%,34%"
    optional: true
- waitForAnimationToEnd

# LANDING SCREEN
- assertVisible:
    text: "CareConnect"

# Tap the correct Sign In (between title and Create Account)
- tapOn:
    text: "Sign In"
    below:
      text: "CareConnect"
    above:
      text: "Create Account"

- waitForAnimationToEnd

# ROLE SELECT
- assertVisible:
    text: "Choose Your Role"
- tapOn:
    text: "Patient"
- waitForAnimationToEnd

# SIGN IN FORM
- tapOn:
    text: "Enter your username"
- inputText: "demo@careconnect.com"

- tapOn:
    text: "Enter your password"
- inputText: "Password123"

# FORM Sign In button (below password field)
# First tap "wakes" the control, second tap actually clicks
- tapOn:
    point: "50%,63%"
- waitForAnimationToEnd
- tapOn:
    point: "50%,63%"

# Now wait for Home evidence, don't assert immediately
- extendedWaitUntil:
    timeout: 15000
    visible:
      text: "Mark as Taken"

- takeScreenshot: "01_logged_in_home"